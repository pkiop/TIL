## 목차

1. 리액트 컴포넌트 설계 관련 생각

## 리액트 컴포넌트 설계 관련 생각

바닐라 JS와 리액트를 사용해서 개발을 해봤다. 리액트에서 상태관리 관련 정말 강력한 기능을 제공해 주지만 마구잡이로 사용한다고 효율적으로 동작하는 건 아니었다. 

리액트는 리렌더링 되는 기준이 State 가 이전과 달라졌는가가 가장 주요하다. 

처음에 컴포넌트를 만들 때 간단한 컴포넌트는 `이 컴포넌트는 이 값만 보여주기 때문에 이 값이 바뀌지 않으면 렌더링 될 필요 없다` 이런게 명확하다. 이런 명확한 컴포넌트는 리렌더링이 일어나면 일어나야 하기 때문에 일어난다. 이런 컴포넌트에서는 불필요한 렌더링이 거의 발생하지 않을 것이다. 

그런데 문제가 되는 복잡한 컴포넌트가 있다. 다른 컴포넌트의 상태값을 받아와서 보여주는 컴포넌트이다. 얘들은 다른 컴포넌트의 상태값이 바뀌었을 때 자기도 바뀌어야 할 상황이 아닐 수 있다.  (Display:none 같은게 되어있는 상태) 또는 바뀌어야 할 상황인데 바뀌지 않을 수 있다. 

또는 하위 컴포넌트에서 받아온 값을 상위 컴포넌트에 전달해서 상위 컴포넌트가 이 값에 적절한 입력을 받아 수정하는 일이 있을 수 있다. 하위 컴포넌트가 이 값을 depend하고 있을 때 어떻게 동작할 지 알 수 없다. 

이런 상황들을 이번에 3주 프로젝트 하면서 겪었다. 주먹구구식으로 처리했지만 이렇게 짜지 않기 위해서는 2가지가 중요할 것 같다는 반성을 했다.

### 1. 설계

애초부터 설계를 잘 해야한다. 이 컴포넌트가 리렌더링 되야할 상황을 잘 생각해서 그에 맞게 동작할 수 있도록 React API를 써야한다. 그냥 useState, Reducer, Callback 등 썼으니까 효율적이겠지? 하는 안일한 생각은 이상한 동작을 만들어낸다. 

### 2. 컴포넌트를 아주 작게

앞에서 문제가 되지 않는 컴포넌트는 자기가 담당하는 값이 명확한 그런 컴포넌트라고 했다. 이런 컴포넌트는 큰 컴포넌트를 나눌 수 있는 세세한 컴포넌트로 나누면서 만들어 낼 수 있다. 관리하기 어려운 큰 컴포넌트를 최대한 나누어서 관리하기 쉬운 부분을 많이 만들어 낸다면 위와 같은 문제를 쉽게 해결할 수 있을 것 같다.