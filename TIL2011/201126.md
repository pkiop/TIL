# Optimistic Update

![](https://i.imgur.com/jBvEaua.png)

## 고민해볼 것 

### Drop될 가능성이 있는 컴포넌트를 사용자한테 보여주는게 맞는걸까

submit버튼을 눌러서 새로운 정보가 사용자에게 보이게 됐는데 이후에 서버에 문제가 발생해서 이 정보가 Drop되면 사용자 경험은 아주 별로일 것 같다. (Submit 눌러서 들어간 걸 눈으로 봤는데 나중에 다시 잘못 들어갔다고 하는 것)

![](https://i.imgur.com/1HQfWI1.png)

차라리 약간 빨리 보여주려고 Drop될 가능성을 갖는 것 보다 이런 형식의 보일랑말랑한 UI로 Loding 화면을 구성하면 일반 로딩 페이지보다 사용자 경험이 더 좋다고 한다. 서비스 하는 관점에서는 이게 가장 안전한 선택인 것 같다.

그래도 이렇게 Submit을 했는데 Drop이 될 가능성은 굉장히 적어서 매우 가끔씩 Drop되는 건 사용자가 눈 감아줄 수준이지 않을까? Drop되는 걸 감수하면 눈에띄게 빠르게 동작하는 앱을 만들 수 있어서 고민이 된다. 

### 데이터가 제대로 들어갔는지를 뭐로 판단할까 (status code vs 실제로 GET해서 확인)

**Status Code로 확인하는 방식**

그림에서 4번이 일어나지 않고 3번에서 code를 확인 후 제대로 들어갔다고 하면 렌더링한 걸 그대로 두고 에러코드가 났다면 렌더링한 걸 drop시키는 방식이다.
이렇게 하면 실제로 GET하는 것 보다 에러 시 Drop되는 시점을 앞당길 수 있다. 
또 GET을 해오는 트래픽을 줄일 수 있기 때문에 네트워크적인 측면에서도 이점이 있다.

하지만 삽입이 정상적으로는 일어났지만 이런 과정 중간에 다른 사용자가 DB에 값을 넣거나 해서 현재 사용자가 보고 있는 상황과 DB의 상황이 다른 경우를 처리할 수 없다는 단점이 있다.

**실제로 GET해서 확인**

그래서 한 페이지를 여러 사용자가 공유하고, 순간 순간 업데이트가 중요하다면 실제로 GET해서 확인하는 방식도 충분히 고려해 볼만 한 것 같다. 거의 실시간성이 보장되야 한다면 이 방법 말고 웹소켓 등을 사용해야 하겠지만 그정도까지 실시간성은 필요없지만 어느정도 빈번하게 업데이트가 일어나야 한다면 이 방식을 고려해 볼 수 있을 것 같다.